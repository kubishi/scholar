name = "kubishi-scholar"
compatibility_flags = ["python_workers"] # <--- Add this
compatibility_date = "2024-01-01"
pages_build_output_dir = "frontend/public"

# D1 Database binding
# Run: wrangler d1 create kubishi-scholar-db
# Then update the database_id below
[[d1_databases]]
binding = "DB"
database_name = "kubishi-scholar-db"
database_id = "914c5ba6-6f29-4eaa-be83-1c9473b9e4a3"

# Vectorize binding: stores vectors (vestor db)
# Run: wrangler vectorize create kubishi-conferences --dimensions 1536 --metric cosine
[[vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "kubishi-conferences"

# Environment variables
[vars]
ENVIRONMENT = "production"
AUTH0_DOMAIN = "kubishi.us.auth0.com"
AUTH0_CLIENT_ID = "zMN0aag54DJ6Bp4O9qVm89uLLNcgZ1A7"
AUTH0_AUDIENCE = "https://api.scholar.kubishi.com"

# Secrets - set via: npx wrangler pages secret put OPENAI_API_KEY --project-name=kubishi-scholar
# OPENAI_API_KEY is injected at runtime from Cloudflare dashboard/secrets
